<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Birds Web GIS</title>
        <link rel="stylesheet" href="src/leaflet/leaflet.css">
        <link rel="stylesheet" href="src/css/bootstrap.css">
        <script src="src/leaflet/leaflet-src.js"></script>
        <script src="src/jquery/jquery-3.2.0.min.js"></script>
        <style>
            #map{
                height: 100vh;
            }
        </style>
    </head>
    <body>
        <div id="side-bar" class="col-md-3">
            <h4>Zoom level: <span id="zoom-level"></span></h4>
        </div>
        <div id="map" class="col-md-9"></div>
        <script>
            var map;
            var lyrOSM;
            var mrkCurrentLocation;

            $(document).ready(function(){
                map = L.map('map', {center: [19,4, -99.2], zoom: 7});
                lyrOSM = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png');
                map.addLayer(lyrOSM);            

                map.on('contextmenu', function(e){
                    L.marker(e.latlng).addTo(map).bindPopup(e.latlng.toString());
                })

                map.on('keypress',function(e){
                    if(e.originalEvent.key == "l"){
                        map.locate();
                    }
                })

                map.on('locationfound', function(e){
                    console.log(e);
                    if(mrkCurrentLocation){
                        mrkCurrentLocation.remove();
                    }
                    mrkCurrentLocation = L.circleMarker(e.latlng).addTo(map);
                    map.setView(e.latlng, 18);
                })

                map.on('zoomend', function(){
                    $("#zoom-level").html(map.getZoom());
                })
            })
        </script>
    </body>
</html>